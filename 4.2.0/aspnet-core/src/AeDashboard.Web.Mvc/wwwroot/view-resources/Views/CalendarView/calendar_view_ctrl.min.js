(function(){"use strict";function n(n,t,i,r){function e(){localStorage.removeItem("count");moment().locale("vi");u(0,22);s()}function o(){r.location.reload()}function s(){$(window).scroll(function(){if($(window).scrollTop()==$(document).height()-$(window).height()){var n=0,t=localStorage.getItem("count");console.log("count "+localStorage.getItem("count"));try{n=localStorage.getItem("count")}catch(i){n=0}u(n,10)}})}function u(n,r){var u={Skip:n,Take:r};t.get("/Calendar/GetLoads",{params:u}).then(function(n){var u,t,f;if(console.log(JSON.stringify(n.data.result.length)),r==0)i.getAll=n.data.result,localStorage.setItem("count",i.getAll.length);else{for(u=0;u<n.data.result.length;u++)i.getAll.push(n.data.result[u]);localStorage.setItem("count",i.getAll.length)}if(i.getAll.length>0)for(t=0;t<i.getAll.length;t++)f=i.getAll[t].day,console.log("day "+f),i.getAll[t].day=" "+moment().locale("vi").subtract(f,"days").calendar().split("lÃºc")[0].split("at")[0];else localStorage.setItem("count",0),$("#myModal").modal()})}var f=this;i.getAll=[];f.title="calendar_view_ctrl";e();i.hoverIn=function(){this.hoverEdit="show"};i.hoverOut=function(){this.hoverEdit="hide"};i.showEdit=function(){};i.edit_caladarView=function(n){var i="/Calendar/EditCalendarViewModal?id="+n;t.get(i).then(function(n){$("#editCalendarView div.modal-body").html(n.data)})};i.delete_item=function(n){var i="/Calendar/Delete?id="+n;t.get(i).then(function(){o()})}}app.controller("ctrl",n);n.$inject=["$location","$http","$scope","$window"]})();