(function(){"use strict";function n(n,t,i,r,u,f,e,o){function l(){i.load=0;localStorage.removeItem("count");moment().locale("vi");v();var n=(new Date).getFullYear()+"-W"+f.getWeek(new Date);i.week=moment(n).toDate();a()}function a(){t.get("/Document/GetIsAdmin").then(function(n){i.getIsAdmin=n.data.result})}function v(){$(window).scroll(function(){var n=$(document).height()-$(window).height()-$(window).scrollTop(),t=!1;n>=0&&n<=9&&(t=!0);n>=400&&n<=410&&(t=!0);n>=300&&n<=310&&(t=!0);n>=50&&n<=60&&(t=!0);n>=100&&n<=110&&(t=!0);n>=150&&n<=160&&(t=!0);n>=200&&n<=210&&(t=!0);t&&(i.count=i.count+1,h(i.count,i.search),f.getColor())})}function y(n,r,u){var e={Skip:n,Take:r,Week:u};f.loading(!0);t.get("/Calendar/SearchWeek",{params:e}).then(function(n){i.getAll=n.data.result;setTimeout(function(){f.setColspan()},100);f.loading(!1)})}function h(n,r){var u={Count:n,Search:r};f.loading(!0);t.get("/Calendar/SearchName",{params:u}).then(function(n){for(var t=0;t<n.data.result.length;t++)i.getAll.push(n.data.result[t]);f.loading(!1);setTimeout(function(){f.setColspan();f.getColor()},100)})}function p(n,r,u){f.loading(!0);var e={Skip:n,Take:r,Date:u};t.get("/Calendar/SearchDate",{params:e}).then(function(n){i.getAll=n.data.result;setTimeout(function(){f.setColspan()},100);f.loading(!1)})}var c=this,s;i.getAll=[];c.title="calendar_view_ctrl";i.count=15;l();s=0;i.$watch("week",function(){if(s++,s>=2){var n=u("date")(i.week,"yyyy-ww");y(0,0,n);e(function(){f.getColor()},1e3)}});i.$watch("searchDate",function(){if(i.load==1){var n=i.searchDate;p(0,0,n);f.getColor()}i.load!=1&&(i.load=1)});i.$watch("search",function(){i.count=15;var n=i.search;i.getAll=[];h(i.count,n);f.getColor()});i.hoverIn=function(){this.hoverEdit="show"};i.formatDate=function(n){return f.formatDate(n,1)};i.onChangeWeek=function(){};i.hoverOut=function(){this.hoverEdit="hide"};i.showEdit=function(){};i.edit_caladarView=function(n){var i="/Calendar/EditCalendarViewModal?id="+n;t.get(i).then(function(n){$("#editCalendarView div.modal-body").html(n.data);$("textarea").froalaEditor({heightMin:250});$("input").magicsearch({dataSource:[{id:1,firstName:"Tim",lastName:"Cook"},{id:2,firstName:"Eric",lastName:"Baker"},{id:3,firstName:"Victor",lastName:"Brown"},{id:4,firstName:"Lisa",lastName:"White"},{id:5,firstName:"Oliver",lastName:"Bull"},{id:6,firstName:"Zade",lastName:"Stock"},{id:7,firstName:"David",lastName:"Reed"},{id:8,firstName:"George",lastName:"Hand"},{id:9,firstName:"Tony",lastName:"Well"},{id:10,firstName:"Bruce",lastName:"Wayne"},],fields:["firstName","lastName"],id:"id",format:"%firstName% Â· %lastName%",multiple:!0,multiField:"firstName",multiStyle:{space:5,width:80}});$("#set-btn").click(function(){$("#basic").trigger("set",{id:"3,4"})})})};i.uCanTrust=function(n){return o.trustAsHtml(n)};i.delete_item=function(n,r){var u="/Calendar/Delete?id="+n;t.get(u).then(function(){i.getAll.splice(r,1)})};i.showBtns=function(){}}app.controller("ctrl",n);n.$inject=["$location","$http","$scope","$window","$filter","factory","$timeout","$sce"]})();