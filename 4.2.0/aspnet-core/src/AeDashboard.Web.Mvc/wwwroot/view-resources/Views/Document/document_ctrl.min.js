function uploadFiles(n){for(var u,f=document.getElementById(n),i=f.files,r=new FormData,t=0;t!=i.length;t++)r.append("files",i[t]);u="/Document/UploadFile";$.ajax({url:u,data:r,processData:!1,contentType:!1,type:"POST",success:function(n){var t=n.result,i,r;$("#Url").val(t.url);t.url!=""?(i=t.url.split("_")[t.url.split("_").length-1],r=$('input[name="bookId"]').val(),r>0?($('input[name="bookId1"]').val(r),localStorage.setItem("item",i),$("#modalUpload").modal("hide")):($("#modalCreateDocument").modal(),$("#modalUpload").modal("hide"),$(".progress-bar").addClass("show"),$(".complete").text("upload 100% "+i))):($(".showinfor").addClass("show"),$("#modalUpload").modal("show"))}})}(function(){"use strict";function n(n,t,i,r,u,f,e){function h(){t.data=[];console.log(r.getIsAdmin().Promise);l();c()}function c(){i.get("/Document/GetIsAdmin").then(function(n){t.getIsAdmin=n.data.result})}function o(n,u,f){r.loading(!0);var e={Skip:n,Take:u,Search:f};i.get("/Document/Search",{params:e}).then(function(n){for(var u=n.data.result,i=0;i<u.length;i++)t.data.push(u[i]);r.loading(!1)})}function l(){var n=0;$(window).scroll(function(){var i=$(document).height()-$(window).height()-$(window).scrollTop(),r,u,f;n++;r=!1;i>=0&&i<=9&&(r=!0);i>=400&&i<=410&&(r=!0);i>=300&&i<=310&&(r=!0);i>=50&&i<=60&&(r=!0);i>=100&&i<=110&&(r=!0);i>=150&&i<=160&&(r=!0);i>=200&&i<=210&&(r=!0);r&&(u=$(".table-row.doc").length+1,f=5,o(u,f,t.search),n=0)})}$("#fileSelected").on("change",function(n){var t=$(n.currentTarget).get(0).files;t.length>0&&$("#filePath").text($("#fileSelected").val())});var s=this;s.title="ctrl";h();t.$watch("search",function(){t.data=[];o(0,32,t.search)});t.uCanTrust=function(n){return e.trustAsHtml(n)};t.addOrUpdate=function(n){console.log("id "+n);$('input[name="bookId"]').val(n);$("#modalUpload").modal();$("textarea").froalaEditor({heightMin:250})};t.uCanTrust=function(n){return e.trustAsHtml(n)};t.onChangeImportant=function(n){t.oldValue=t.data[n].id;var r="/Document/EditIportant?id="+t.data[n].id;i.post(r).then(function(){});t.data[n].important?(t.data[n].important=!1,t.data[n].colorstar=""):(t.data[n].important=!0,t.data[n].colorstar="red")};t.editUrl=function(n){console.log("id "+n)};t.delete=function(n){var r="/Document/Delete?id="+n;i.get(r).then(function(){t.data=jQuery.grep(t.data,function(t){return t.id!=n})})};t.edit=function(n){var r="/Document/_Edit?id="+n,u=$('input[name="bookId"]').val();i.get(r).then(function(n){var r=n.data.result,i=$("#editDocument div.modal-body").html(n.data);f(i)(t);t.loadCatalogue();$("#editDocument").modal();$("textarea").froalaEditor({heightMin:250})})};t.onUpload=function(){$(".upload-document").removeClass("hide").addClass("show");$(".upload-document").hasClass("show")};t.editDocument=function(n){t.addOrUpdate(n)};t.hideModal=function(){u(function(){$("#editDocument").modal("hide")},3e3)};t.submitForm=function(){i.post("/Document/Edit",{params:JSON.stringify(t.document)}).then(function(){})};t.loadCatalogue=function(){i.get("/Document/LoadCatalogue").then(function(n){t.catalog=n.data.result})};t.loadCatalogue()}app.controller("ctrl",n);n.$inject=["$location","$scope","$http","factory","$timeout","$compile","$sce"]})();